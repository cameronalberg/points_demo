<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>Cameron Alberg Demo</title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="Demo Web Service for Fetch Rewards">
    <meta name="author" content="Cameron Alberg">
    <link rel="shortcut icon" href="favicon.ico"> 
    
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap" rel="stylesheet">
    
    <!-- FontAwesome JS-->
    <script defer src="assets/fontawesome/js/all.min.js"></script>
    
    <!-- Plugins CSS -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.2/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="assets/plugins/simplelightbox/simple-lightbox.min.css">

    <!-- Theme CSS -->  
    <link id="theme-style" rel="stylesheet" href="assets/css/theme.css">

</head> 

<body class="docs-page">    
    <header class="header fixed-top">	    
        <div class="branding docs-branding">
            <div class="container-fluid position-relative py-2">
                <div class="docs-logo-wrapper">
					<button id="docs-sidebar-toggler" class="docs-sidebar-toggler docs-sidebar-visible me-2 d-xl-none" type="button">
	                    <span></span>
	                    <span></span>
	                    <span></span>
	                </button>
	                <div class="site-logo"><a class="navbar-brand" href="index.html"><img class="logo-icon me-2" src="assets/images/fetch_logo.png" alt="logo"><span class="logo-text">Coding Exercise<span class="text-alt"> (Cameron Alberg)</span></span></a></div>

                </div><!--//docs-logo-wrapper-->
	            <div class="docs-top-utilities d-flex justify-content-end align-items-center">
					<ul class="social-list list-inline mx-md-3 mx-lg-5 mb-0 d-none d-lg-flex">
						<li class="list-inline-item"><a href="https://github.com/cameronalberg"><i class="fab fa-github fa-fw"></i></a></li>
			            <li class="list-inline-item"><a href="https://linkedin.com/in/cameronalberg"><i class="fab fa-linkedin fa-fw"></i></a></li>
		            </ul><!--//social-list-->
		            <a href="files/cameronalberg_resume.pdf" class="btn btn-primary d-none d-lg-flex">Download Resume</a>
	            </div><!--//docs-top-utilities-->
            </div><!--//container-->
        </div><!--//branding-->
    </header><!--//header-->
    
    
    <div class="docs-wrapper">
	    <div id="docs-sidebar" class="docs-sidebar">
		    <div class="top-search-box d-lg-none p-3">
                <form class="search-form">
		            <input type="text" placeholder="Search the docs..." name="search" class="form-control search-input">
		            <button type="submit" class="btn search-btn" value="Search"><i class="fas fa-search"></i></button>
		        </form>
            </div>
		    <nav id="docs-nav" class="docs-nav navbar">
			    <ul class="section-items list-unstyled nav flex-column pb-3">
				    <li class="nav-item section-title"><a class="nav-link scrollto" href="#section-1"><span class="theme-icon-holder me-2"><i class="fas fa-map-signs"></i></span>Introduction</a></li>
					<li class="nav-item"><a class="nav-link scrollto" href="#item-1-1">Prompt</a></li>
					<li class="nav-item"><a class="nav-link scrollto" href="#item-1-2">Overview</a></li>
				    <li class="nav-item section-title mt-3"><a class="nav-link scrollto" href="#section-2"><span class="theme-icon-holder me-2"><i class="fas fa-arrow-down"></i></span>Installation</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-2-1">Docker</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-2-2">JAR</a></li>
				    <li class="nav-item section-title mt-3"><a class="nav-link scrollto" href="#section-3"><span class="theme-icon-holder me-2"><i class="fas fa-box"></i></span>API Usage</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-3-1">Add Transactions</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-3-2">Spend Points</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-3-3">Check Payer Balances</a></li>
					<li class="nav-item"><a class="nav-link scrollto" href="#item-3-4">Lookup Transaction</a></li>
			    </ul>

		    </nav><!--//docs-nav-->
	    </div><!--//docs-sidebar-->
	    <div class="docs-content">
		    <div class="container">
			    <article class="docs-article" id="section-1">
				    <header class="docs-header">
					    <section class="docs-intro">
							<p>Welcome! This web service was developed as part of a coding exercise for Fetch Rewards. This service was developed using the Spring Boot framework.</p>
							<p>The repository for this project is available here: <a href="https://github.com/cameronalberg/points_demo">https://github.com/cameronalberg/points_demo</a></p>
						</section><!--//docs-intro-->
				    </header>
				    <section class="docs-section" id="item-1-1">
						<h2 class="section-heading">Prompt</h2>
						<p>The service requirements defined for the exercise are listed below:</p>
						<blockquote>
							<p>
								"Our users have points in their accounts. Users only see a single balance in their accounts. But for reporting purposes we actually track their points per
							payer/partner. In our system, each transaction record contains: payer (string), points (integer), timestamp (date).
							For earning points it is easy to assign a payer, we know which actions earned the points. And thus which partner should be paying for the points.
							When a user spends points, they don't know or care which payer the points come from. But, our accounting team does care how the points are spent.
							There are two rules for determining what points to "spend" first:</p>
								<ul>
									<li>We want the oldest points to be spent first (oldest based on transaction timestamp, not the order theyâ€™re received)</li>
									<li> We want no payer's points to go negative."</li>
								</ul>

							Provide routes that:
							<ul>
								<li>Add transactions for a specific payer and date.</li>
								<li>Spend points using the rules above and return a list of { "payer": &lt;string&gt;, "points": &lt;integer&gt; } for each call.</li>
								<li> Return all payer point balances.</li>
							</ul>
						</blockquote>
					</section><!--//section-->
					
					<section class="docs-section" id="item-1-2">
						<h2 class="section-heading">Overview</h2>
						<p> This service provides the three requested API endpoints (add transaction, spend points, get balances) and operates with the conditions outlined in the requirements. In the absence of an exhaustive set of allowable conditions (and the stated request to use best judgement), several additional assumptions were made on the desired system requirements:</p>
						<h5 class="mt-5">Assumptions:</h5>
						<ul>
							<li>All parseable transactions posted to the transaction route are considered to have valid point values and will not result in a payer's balance becoming negative. </li>
							<li>Spend calls are considered separate from the transactions added via the transaction route, and are therefore not stored as transactions.</li>
							<li>Transactions that contain the same name and timestamp are considered duplicates and are not re-added.</li>
							<li>If a spend call requests to spend more points than are possible, the maximum amount of possible points will be spent.</li>
							<li>A user of the service may want to retrieve the details of a previously added transaction, and so the response to the add transaction route should return a reference to the added transaction.</li>
						</ul>
						<p>One additional endpoint was added to be able to retrieve an added transaction.</p>
					</section><!--//section-->

			    </article>
			    
			    <article class="docs-article" id="section-2">
				    <header class="docs-header">
					    <h1 class="docs-heading">Installation</h1>
					    <section class="docs-intro">
							<p>This service can be deployed via Docker or using an executable JAR file.</p>
						</section><!--//docs-intro-->
				    </header>
				     <section class="docs-section" id="item-2-1">
						<h2 class="section-heading">Docker</h2>
						 <p>The Docker Engine is required to deploy this web service with Docker. </p>
						 <p>The latest docker image can be retrieved using the following command:</p>
						 <div class="docs-code-block">
							 <pre class="shadow-lg rounded"><code class="json hljs"> docker pull calberg/points_demo </code></pre>
						 </div><!--//docs-code-block-->
						 <p>The image can be run as a container with the following command:</p>
						 <div class="docs-code-block">
							<pre class="shadow-lg rounded"><code class="json hljs"> docker run -p {host_port}:8080 calberg/points_demo </code></pre>
						 </div><!--//docs-code-block-->
						 <p><code>host_port</code> can be 8080 or another port number if 8080 is already taken.</p>
					</section><!--//section-->
					
					<section class="docs-section" id="item-2-2">
						<h2 class="section-heading">JAR</h2>
						<p><a href="https://www.oracle.com/java/technologies/downloads/#java11">Java 11</a> is required to run this application via a JAR File.</p>
						<p>The latest release of this API can be downloaded as a .jar package <a href="#">here</a></p>
						<p>If Java is installed, the application can be started with the following command: </p>
						<div class="docs-code-block">
							<pre class="shadow-lg rounded"><code class="json hljs"> java -jar ./{latestReleaseName}.jar</code></pre>
						</div><!--//docs-code-block-->
					</section><!--//section-->
					
			    </article><!--//docs-article-->
			    
			    
			    <article class="docs-article" id="section-3">
				    <header class="docs-header">
					    <h1 class="docs-heading">API Usage</h1>
					    <section class="docs-intro">
							This API follows the REST architecture style and accepts/returns JSON. Request bodies are assumed to be properly formatted JSON.
						</section><!--//docs-intro-->
				    </header>
				     <section class="docs-section" id="item-3-1">
						<h2 class="section-heading">Add Transaction (/add)</h2>
						 <hr>
						 <div>
							 <p style="display: inline">HTTP Method: </p>
							 <div style="display: inline" class="alert alert-info" role="alert">POST</div>
						 </div>

						 <div style="padding-top: 20px">
							 <h5>Request Body Schema:  <code> application/json</code></h5>
							 <div class="table-responsive my-4">
								 <table class="table table-striped">
									 <thead>
									 <tr>
										 <th scope="col">key</th>
										 <th scope="col">type</th>
										 <th scope="col">description</th>
									 </tr>
									 </thead>
									 <tbody>
									 <tr>
										 <td>payer</td>
										 <td>string</td>
										 <td><p>Name of Payer</p><p>Should contain at least one alphanumeric character. Not case-sensitive.</p><p>Example: <code>"DANNON"</code></p></td>
									 </tr>
									 <tr>
										 <td>points</td>
										 <td>integer </td>
										 <td><p>Number of points gained by transaction. Can be negative.</p><p>Example: <code>100</code></p></td>
									 </tr>
									 <tr>
										 <td>timestamp</td>
										 <td>string</td>
										 <td><p>Time of transaction captured as a string using the following format:</p> <p>"YYYY-MM-DDThh:mm:ssTZD"</p><p>Example: <code>2020-11-01T14:00:00Z</code></p></td>
									 </tr>
									 </tbody>
								 </table>
							 </div>
						 </div>
						 <h4>Example Usage</h4>
						 <h5>Request URL:</h5>
						 <div class="docs-code-block">
							 <pre class="shadow-lg rounded" style="width: fit-content"><code class="json hljs"> https://{service_url}/add </code></pre>
						 </div><!--//docs-code-block-->
						 <h5>Request Body Example (required):</h5>
						 <div class="docs-code-block">
							<pre class="shadow-lg rounded" style="width: fit-content"><code class="json hljs">{
    <span class="hljs-attr">"payer"</span>: <span class="hljs-string">"DANNON"</span>,
    <span class="hljs-attr">"points"</span>: <span class="hljs-literal">100</span>,
    <span class="hljs-attr">"timestamp"</span>:<span class="hljs-attr">"2020-11-01T14:00:00Z"</span>
}
</code></pre>
						 </div><!--//docs-code-block-->
						 <div style="padding-top: 20px">
							 <h4>Responses:</h4>
							 <div style="width: fit-content" class="alert alert-success" role="alert">201 CREATED</div>
							 <p>The transaction was successfully added to the system (or already existed). A transactionID will be provided in the response body, which can be used to retrieve the transaction details via the <a href="#item-3-4">transaction lookup</a> endpoint. </p>
							 <h5>Example Response</h5>
							 <div class="docs-code-block">
							<pre class="shadow-lg rounded" style="width: fit-content"><code class="json hljs">{
    <span class="hljs-attr">"transactionID"</span>: <span class="hljs-literal">3</span>
}
</code></pre>
							 </div>
							 <div style="width: fit-content" class="alert alert-danger" role="alert">400 BAD REQUEST</div>
							 <p> An error was encountered while trying to add the transaction. If possible, error details will be provided in the response body.</p>
						 </div>
					</section><!--//section-->
					
					<section class="docs-section" id="item-3-2">
						<h2 class="section-heading">Spend Points (/spend)</h2>
						<div>
							<p style="display: inline">HTTP Method: </p>
							<div style="display: inline" class="alert alert-primary" role="alert">PUT</div>
						</div>

						<div style="padding-top: 20px">
							<h5>Request Body Schema:  <code> application/json</code></h5>
							<div class="table-responsive my-4">
								<table class="table table-striped">
									<thead>
									<tr>
										<th scope="col">type</th>
										<th scope="col">description</th>
									</tr>
									</thead>
									<tbody>
									<tr>
										<td>integer <code>&gt;= 0</code></td>
										<td><p>Number of points to be spent.</p><p>Cannot be negative.</p><p>Example: <code>5000</code></p></td>
									</tr>
									</tbody>
								</table>
							</div>
							<h4>Example Usage</h4>
							<h5>Request URL:</h5>
							<div class="docs-code-block">
								<pre class="shadow-lg rounded" style="width: fit-content"><code class="json hljs"> https://{service_url}/spend </code></pre>
							</div><!--//docs-code-block-->
							<h5>Request Body Example (required):</h5>
							<div class="docs-code-block">
							<pre class="shadow-lg rounded" style="width: fit-content"><code class="json hljs">5000</code></pre>
								</div><!--//docs-code-block-->
						</div>

						<div style="padding-top: 20px">
							<h4>Responses:</h4>
							<div style="width: fit-content" class="alert alert-success" role="alert">200 OK</div>
							<p> All possible points were spent. The response body indicates which payer's points were spent. <b>Note: </b> The sum of the returned points may be less than the number of points specified to be spent, in the event that not enough points were available. </p>
							<div style="padding-top: 20px">
								<h5>Response Schema:  <code> application/json</code></h5>
								<div class="table-responsive my-4">
									<table class="table table-striped">
										<thead>
										<tr>
											<th scope="col"></th>
											<th scope="col">key</th>
											<th scope="col">value</th>
										</tr>
										</thead>
										<tbody>
										<tr>
											<th scope="row">type</th>
											<td>string</td>
											<td>integer <code>&lt; 0</code></td>

										</tr>
										<tr>
											<th scope="row">description</th>
											<td><p>Name of payer.</p></td>
											<td><p>Number of payer points spent.</p></td>
										</tr>
										<tr>
											<th scope="row">example</th>
											<td><code>"DANNON"</code></td>
											<td><code>-100</code></td>
										</tr>
										</tbody>
									</table>
								</div>
							</div>
							<h5>Example Response</h5>
							<div class="docs-code-block">
							<pre class="shadow-lg rounded" style="width: fit-content"><code class="json hljs">{
    <span class="hljs-attr">"DANNON"</span>: <span class="hljs-literal">-100</span>,
    <span class="hljs-attr">"UNILEVER"</span>: <span class="hljs-literal">-200</span>,
    <span class="hljs-attr">"MILLER COORS"</span>: <span class="hljs-literal">-4700</span>
}
</code></pre>
							</div>
							<div style="width: fit-content" class="alert alert-danger" role="alert">400 BAD REQUEST</div>
							<p> An error was encountered while trying to spend the points requested. If possible, error details will be provided in the response body.</p>
						</div>
					</section><!--//section-->
					
					<section class="docs-section" id="item-3-3">
						<h2 class="section-heading">Get Payer Balances (/balance)</h2>
						<div>
							<p style="display: inline">HTTP Method: </p>
							<div style="display: inline" class="alert alert-warning" role="alert">GET</div>
						</div>

						<div style="padding-top: 20px; padding-bottom: 20px">
							<h5>Query Parameters:</h5>
							<p>None</p>
						</div>
						<h4>Example Usage</h4>
						<h5>Request URL:</h5>
						<div class="docs-code-block">
							<pre class="shadow-lg rounded" style="width: fit-content"><code class="json hljs"> https://{service_url}/balance </code></pre>
						</div><!--//docs-code-block-->

						<div style="padding-top: 20px">
							<h5>Response:</h5>
							<div style="width: fit-content" class="alert alert-success" role="alert">200 OK</div>
							<div style="padding-top: 20px">
								<h5>Response Schema:  <code> application/json</code></h5>
								<div class="table-responsive my-4">
									<table class="table table-striped">
										<thead>
										<tr>
											<th scope="col"></th>
											<th scope="col">key</th>
											<th scope="col">value</th>
										</tr>
										</thead>
										<tbody>
										<tr>
											<th scope="row">type</th>
											<td>string</td>
											<td>integer <code>&gt;= 0</code></td>

										</tr>
										<tr>
											<th scope="row">description</th>
											<td><p>Name of payer.</p></td>
											<td><p>Number of points remaining for payer.</p></td>
										</tr>
										<tr>
											<th scope="row">example</th>
											<td><code>"DANNON"</code></td>
											<td><code>100</code></td>
										</tr>
										</tbody>
									</table>
								</div>
							</div>
							<h5>Example Response</h5>
							<div class="docs-code-block">
							<pre class="shadow-lg rounded" style="width: fit-content"><code class="json hljs">{
    <span class="hljs-attr">"DANNON"</span>: <span class="hljs-literal">1000</span>,
    <span class="hljs-attr">"UNILEVER"</span>: <span class="hljs-literal">0</span>,
    <span class="hljs-attr">"MILLER COORS"</span>: <span class="hljs-literal">5300</span>
}
</code></pre>
							</div>
						</div>
					</section><!--//section-->
					<section class="docs-section" id="item-3-4">
						<h2 class="section-heading">Lookup Transaction (/transactions)</h2>
						<div>
							<p style="display: inline">HTTP Method: </p>
							<div style="display: inline" class="alert alert-warning" role="alert">GET</div>
						</div>

						<div style="padding-top: 20px; padding-bottom: 20px">
							<h5>Query Parameters (required):</h5>
							<div class="table-responsive my-4">
								<table class="table table-striped">
									<thead>
									<tr>
										<th scope="col">parameter</th>
										<th scope="col">type</th>
										<th scope="col">description</th>
									</tr>
									</thead>
									<tbody>
									<tr>
										<td>transactionID</td>
										<td>integer <code>&gt;= 0</code></td>
										<td>ID of previously added transaction. </td>

									</tr>
									</tbody>
								</table>
							</div>
						</div>
						<h4>Example Usage</h4>
						<h5>Request URL:</h5>
						<div class="docs-code-block">
							<pre class="shadow-lg rounded" style="width: fit-content"><code class="json hljs"> https://{service_url}/transactions/{transactionID} </code></pre>
						</div><!--//docs-code-block-->

						<div style="padding-top: 20px">
							<h4>Responses:</h4>
							<div style="width: fit-content" class="alert alert-success" role="alert">200 OK</div>
							<div style="padding-top: 20px">
								<h5>Response Body Schema:  <code> application/json</code></h5>
								<div class="table-responsive my-4">
									<table class="table table-striped">
										<thead>
										<tr>
											<th scope="col">key</th>
											<th scope="col">type</th>
											<th scope="col">description</th>
										</tr>
										</thead>
										<tbody>
										<tr>
											<td>payer</td>
											<td>string</td>
											<td><p>Name of Payer</p><p>Example: <code>"DANNON"</code></p></td>
										</tr>
										<tr>
											<td>points</td>
											<td>integer </td>
											<td><p>Number of points gained by transaction.</p><p>Example: <code>100</code></p></td>
										</tr>
										<tr>
											<td>timestamp</td>
											<td>string</td>
											<td><p>Transaction timestamp</p><p>Example: <code>2020-11-01T14:00:00Z</code></p></td>
										</tr>
										<tr>
											<td>transactionID</td>
											<td>integer</td>
											<td><p>ID of transaction</p><p>Example: <code>2</code></p></td>
										</tr>
										</tbody>
									</table>
								</div>
							</div>
							<h5>Example Response</h5>
							<div class="docs-code-block">
							<pre class="shadow-lg rounded" style="width: fit-content"><code class="json hljs">{
    <span class="hljs-attr">"payer"</span>: <span class="hljs-string">"DANNON"</span>,
    <span class="hljs-attr">"points"</span>: <span class="hljs-literal">100</span>,
    <span class="hljs-attr">"timestamp"</span>:<span class="hljs-attr">"2020-11-01T14:00:00Z"</span>,
    <span class="hljs-attr">"transactionID"</span>: <span class="hljs-literal">2</span>
}
</code></pre>
							</div><!--//docs-code-block-->
						</div>
						<div style="width: fit-content" class="alert alert-danger" role="alert">404 NOT FOUND</div>
						<p>The specified transaction ID could not be found.</p>
					</section><!--//section-->
			    </article><!--//docs-article-->
			    
			    <footer class="footer">
				    <div class="container text-center py-5">
				        <!--/* This template is free as long as you keep the footer attribution link. If you'd like to use the template without the attribution link, you can buy the commercial license via our website: themes.3rdwavemedia.com Thank you for your support. :) */-->
			            <small class="copyright">The template used for this document was designed by <a class="theme-link" href="http://themes.3rdwavemedia.com" target="_blank">Xiaoying Riley</a></small>
				    </div>
			    </footer>
		    </div> 
	    </div>
    </div><!--//docs-wrapper-->
   
       
    <!-- Javascript -->          
    <script src="assets/plugins/popper.min.js"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>  
    
    
    <!-- Page Specific JS -->
    <script src="assets/plugins/smoothscroll.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
    <script src="assets/js/highlight-custom.js"></script> 
    <script src="assets/plugins/simplelightbox/simple-lightbox.min.js"></script>      
    <script src="assets/plugins/gumshoe/gumshoe.polyfills.min.js"></script> 
    <script src="assets/js/docs.js"></script> 

</body>
</html> 

